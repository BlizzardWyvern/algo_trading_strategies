"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateSlippage = exports.getZeroExSwapQuote = void 0;
const big_js_1 = __importDefault(require("big.js"));
const axios_1 = require("../lib/axios/axios");
const request_helpers_1 = require("../lib/axios/request-helpers");
const types_1 = require("../types");
const zeroExUrlMap = {
    [types_1.Networks.MAINNET]: 'https://api.0x.org/swap/v1/quote',
    [types_1.Networks.ROPSTEN]: 'https://ropsten.api.0x.org/swap/v1/quote',
};
async function getZeroExSwapQuote({ sellAmount, sellToken, buyTokenAddress, slippageFraction, networkId, }) {
    return (0, axios_1.axiosRequest)({
        method: 'GET',
        url: (0, request_helpers_1.generateQueryPath)(zeroExUrlMap[networkId], {
            sellAmount,
            sellToken,
            buyToken: buyTokenAddress,
            slippageFraction,
        }),
    });
}
exports.getZeroExSwapQuote = getZeroExSwapQuote;
function validateSlippage(slippage) {
    if (slippage) {
        const slippageBig = (0, big_js_1.default)(slippage);
        if (slippageBig.lt(0) || slippageBig.gt(1)) {
            throw Error(`Slippage: ${slippage} is not a valid fraction from 0 to 1`);
        }
    }
}
exports.validateSlippage = validateSlippage;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiemVyb0V4LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NsaWVudHMvemVyb0V4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLG9EQUF5QjtBQUV6Qiw4Q0FBa0Q7QUFDbEQsa0VBQWlFO0FBQ2pFLG9DQUF3RDtBQUV4RCxNQUFNLFlBQVksR0FBb0M7SUFDcEQsQ0FBQyxnQkFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLGtDQUFrQztJQUN0RCxDQUFDLGdCQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsMENBQTBDO0NBQy9ELENBQUM7QUFFSyxLQUFLLFVBQVUsa0JBQWtCLENBQUMsRUFDdkMsVUFBVSxFQUNWLFNBQVMsRUFDVCxlQUFlLEVBQ2YsZ0JBQWdCLEVBQ2hCLFNBQVMsR0FPVjtJQUNDLE9BQU8sSUFBQSxvQkFBWSxFQUFDO1FBQ2xCLE1BQU0sRUFBRSxLQUFLO1FBQ2IsR0FBRyxFQUFFLElBQUEsbUNBQWlCLEVBQ3BCLFlBQVksQ0FBQyxTQUFTLENBQUMsRUFDdkI7WUFDRSxVQUFVO1lBQ1YsU0FBUztZQUNULFFBQVEsRUFBRSxlQUFlO1lBQ3pCLGdCQUFnQjtTQUNqQixDQUNGO0tBQ0YsQ0FBZ0MsQ0FBQztBQUNwQyxDQUFDO0FBekJELGdEQXlCQztBQUVELFNBQWdCLGdCQUFnQixDQUFDLFFBQWlCO0lBQ2hELElBQUksUUFBUSxFQUFFO1FBQ1osTUFBTSxXQUFXLEdBQVEsSUFBQSxnQkFBRyxFQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3ZDLElBQUksV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQzFDLE1BQU0sS0FBSyxDQUFDLGFBQWEsUUFBUSxzQ0FBc0MsQ0FBQyxDQUFDO1NBQzFFO0tBQ0Y7QUFDSCxDQUFDO0FBUEQsNENBT0MifQ==